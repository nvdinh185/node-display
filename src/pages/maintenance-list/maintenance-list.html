<ion-header>
  <ion-navbar>
    <ion-title>BẢO DƯỠNG SITES</ion-title>
    <ion-buttons *ngIf="!isSearch && dynamicList?.search_bar" start>
      <button ion-button icon-only color="royal" (click)="goSearch()">
          <ion-icon name="search"></ion-icon>
      </button>
    </ion-buttons>

    <!-- <ion-buttons end *ngFor="let btn of dynamicList?.buttons">
        <button ion-button icon-only color="{{btn.color}}" (click)="onClick(btn)">
            <ion-icon name="{{btn.icon}}"></ion-icon>
        </button>
    </ion-buttons> -->

    <ion-searchbar *ngIf="isSearch && dynamicList?.search_bar" placeholder="{{dynamicList?.search_bar.hint}}"
        [(ngModel)]="searchString" [showCancelButton]="shouldShowCancel" (ionInput)="onInput($event)" (keyup.enter)="searchEnter()"
        (keyup.esc)="searchEnter()" start>
    </ion-searchbar>

    <!-- <ion-title *ngIf="!isSearch">{{dynamicList?.title}}</ion-title> -->
  </ion-navbar>
</ion-header>

<ion-content>
    <ion-list>
        <!-- <ion-item>
            <ion-title>test</ion-title>
        </ion-item> -->
        <ion-item-sliding #slidingItem class="background-list" *ngFor="let site of dynamicList?.items">
            
                <ion-item #item class="background-item" tappable (click)="onClickItem(cycle)">
                    <!-- <ion-avatar item-start *ngIf="cycle.image">
                        <img [src]="cycle.image">
                    </ion-avatar> -->
                    <ion-title>{{cycle.name}}({{cycle.id}})</ion-title>
                    <h2>Số trạm: {{cycle.count_site}} </h2>
                    <h3>Lên kế hoạch: {{cycle.count_maintenance}} </h3>
                    <p text-wrap>Hoàn thành: {{cycle.count_finish}}</p>
                    <ion-note item-end>{{cycle.create_time | date: 'dd/MM/yyyy'}}</ion-note>
                </ion-item>
    
                <ion-item-options>
                    <button ion-button color="danger" (click)="onClickDetails(slidingItem, cycle, 'LOCK')">
                        <ion-icon name="ios-construct-outline"></ion-icon>
                        Khóa chu kỳ
                    </button>
                    <button ion-button color="secondary" (click)="onClickDetails(slidingItem, cycle, 'REPAIR')">
                        <ion-icon name="print"></ion-icon>
                        Chỉnh sửa chu kỳ
                    </button>
                    <button ion-button color="primary" (click)="onClickDetails(slidingItem, cycle, 'MAINTAIN')">
                        <ion-icon name="ios-construct-outline"></ion-icon>
                        Bảo dưỡng
                    </button>
                </ion-item-options>
    
                <ion-item-options side="left">
                    <button ion-button color="primary" expandable (click)="onClickDetails(slidingItem, cycle, 'RELOAD')">
                        <ion-icon name="checkmark"></ion-icon>
                        <div>Tổng hợp</div>
                        <ion-spinner id="archive-spinner"></ion-spinner>
                    </button>
                </ion-item-options>

        </ion-item-sliding>

    </ion-list>
</ion-content>

<ion-content no-padding class="background-page gradient">
  <ion-grid>
      <ion-row>
          <ion-col class="background-card gradient grid-border" text-center col-12 offset-xl-3 col-xl-6 offset-lg-3
              col-lg-6 offset-md-2 col-md-8 col-sm-12>

              <ion-list>

                  <ion-item-sliding #slidingItem class="background-list" *ngFor="let it of dynamicList?.items">
                      <ion-item #item class="background-item" (click)="onClickItem(it)">
                          <ion-icon item-start *ngIf="!isMobile&&it.icon" name="{{it.icon}}" color="{{it.color}}"></ion-icon>
                          <ion-avatar item-start *ngIf="!isMobile&&it.image">
                              <img [src]="it.image">
                          </ion-avatar>

                          <h1 *ngIf="it.h1">{{it.h1}}</h1>
                          <h2 *ngIf="it.h2">{{it.h2}}</h2>
                          <p text-wrap style="text-align: justify;" *ngIf="it.p">{{it.p}}</p>
                          <ion-note text-wrap style="text-align: justify;" item-end *ngIf="it.note">{{it.note}}</ion-note>
                      </ion-item>

                      <ion-item-options>
                          <button ion-button *ngFor="let opt of options" color="{{opt.color}}" (click)="onClickDetails(slidingItem, opt, it)">
                              <ion-icon name="{{opt.icon}}"></ion-icon>
                              {{opt.name}}
                          </button>
                      </ion-item-options>

                  </ion-item-sliding>
                </ion-list>
              </ion-col>
          </ion-row>
      </ion-grid>
    </ion-content> 